!function(){var n,t,e,i,o;n=function(n){function t(n,t){"use strict";function e(){h=x.children,E=h.length,h.length<2&&(t.continuous=!1),w.transitions&&t.continuous&&h.length<3&&(x.appendChild(h[0].cloneNode(!0)),x.appendChild(x.children[1].cloneNode(!0)),h=x.children),p=new Array(h.length),m=n.getBoundingClientRect().width||n.offsetWidth,x.style.width=h.length*m+"px";for(var e=h.length;e--;){var i=h[e];i.style.width=m+"px",i.setAttribute("data-index",e),w.transitions&&(i.style.left=e*-m+"px",s(e,b>e?-m:e>b?m:0,0))}t.continuous&&w.transitions&&(s(r(b-1),-m,0),s(r(b+1),m,0)),w.transitions||(x.style.left=b*-m+"px"),n.style.visibility="visible"}function i(){t.continuous?a(b-1):b&&a(b-1)}function o(){t.continuous?a(b+1):b<h.length-1&&a(b+1)}function r(n){return(h.length+n%h.length)%h.length}function a(n,e){if(b!=n){if(w.transitions){var i=Math.abs(b-n)/(b-n);if(t.continuous){var o=i;i=-p[r(n)]/m,i!==o&&(n=-i*h.length+n)}for(var a=Math.abs(b-n)-1;a--;)s(r((n>b?n:b)-a-1),m*i,0);n=r(n),s(b,m*i,e||y),s(n,0,e||y),t.continuous&&s(r(n-i),-(m*i),0)}else n=r(n),d(b*-m,n*-m,e||y);b=n,f(t.callback&&t.callback(b,h[b]))}}function s(n,t,e){u(n,t,e),p[n]=t}function u(n,t,e){var i=h[n],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+t+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+t+"px)")}function d(n,e,i){if(!i)return void(x.style.left=e+"px");var o=+new Date,r=setInterval(function(){var a=+new Date-o;return a>i?(x.style.left=e+"px",L&&c(),t.transitionEnd&&t.transitionEnd.call(event,b,h[b]),void clearInterval(r)):void(x.style.left=(e-n)*(Math.floor(a/i*100)/100)+n+"px")},4)}function c(){g=setTimeout(o,L)}function l(){L=0,clearTimeout(g)}var v=function(){},f=function(n){setTimeout(n||v,0)},w={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(n){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in t)if(void 0!==n.style[t[e]])return!0;return!1}(document.createElement("swipe"))};if(n){var h,p,m,E,x=n.children[0];t=t||{};var b=parseInt(t.startSlide,10)||0,y=t.speed||300;t.continuous=void 0!==t.continuous?t.continuous:!0;var g,T,L=t.auto||0,k={},D={},M={handleEvent:function(n){switch(n.type){case"touchstart":this.start(n);break;case"touchmove":this.move(n);break;case"touchend":f(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(n));break;case"resize":f(e)}t.stopPropagation&&n.stopPropagation()},start:function(n){var t=n.touches[0];k={x:t.pageX,y:t.pageY,time:+new Date},T=void 0,D={},x.addEventListener("touchmove",this,!1),x.addEventListener("touchend",this,!1)},move:function(n){if(!(n.touches.length>1||n.scale&&1!==n.scale)){t.disableScroll&&n.preventDefault();var e=n.touches[0];D={x:e.pageX-k.x,y:e.pageY-k.y},"undefined"==typeof T&&(T=!!(T||Math.abs(D.x)<Math.abs(D.y))),T||(n.preventDefault(),l(),t.continuous?(u(r(b-1),D.x+p[r(b-1)],0),u(b,D.x+p[b],0),u(r(b+1),D.x+p[r(b+1)],0)):(D.x=D.x/(!b&&D.x>0||b==h.length-1&&D.x<0?Math.abs(D.x)/m+1:1),u(b-1,D.x+p[b-1],0),u(b,D.x+p[b],0),u(b+1,D.x+p[b+1],0)))}},end:function(){var n=+new Date-k.time,e=Number(n)<250&&Math.abs(D.x)>20||Math.abs(D.x)>m/2,i=!b&&D.x>0||b==h.length-1&&D.x<0;t.continuous&&(i=!1);var o=D.x<0;T||(e&&!i?(o?(t.continuous?(s(r(b-1),-m,0),s(r(b+2),m,0)):s(b-1,-m,0),s(b,p[b]-m,y),s(r(b+1),p[r(b+1)]-m,y),b=r(b+1)):(t.continuous?(s(r(b+1),m,0),s(r(b-2),-m,0)):s(b+1,m,0),s(b,p[b]+m,y),s(r(b-1),p[r(b-1)]+m,y),b=r(b-1)),t.callback&&t.callback(b,h[b])):t.continuous?(s(r(b-1),-m,y),s(b,0,y),s(r(b+1),m,y)):(s(b-1,-m,y),s(b,0,y),s(b+1,m,y))),x.removeEventListener("touchmove",M,!1),x.removeEventListener("touchend",M,!1)},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==b&&(L&&c(),t.transitionEnd&&t.transitionEnd.call(n,b,h[b]))}};return e(),L&&c(),w.addEventListener?(w.touch&&x.addEventListener("touchstart",M,!1),w.transitions&&(x.addEventListener("webkitTransitionEnd",M,!1),x.addEventListener("msTransitionEnd",M,!1),x.addEventListener("oTransitionEnd",M,!1),x.addEventListener("otransitionend",M,!1),x.addEventListener("transitionend",M,!1)),window.addEventListener("resize",M,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(n,t){l(),a(n,t)},prev:function(){l(),i()},next:function(){l(),o()},stop:function(){l()},getPos:function(){return b},getNumSlides:function(){return E},kill:function(){l(),x.style.width="",x.style.left="";for(var n=h.length;n--;){var t=h[n];t.style.width="",t.style.left="",w.transitions&&u(n,0,0)}w.addEventListener?(x.removeEventListener("touchstart",M,!1),x.removeEventListener("webkitTransitionEnd",M,!1),x.removeEventListener("msTransitionEnd",M,!1),x.removeEventListener("oTransitionEnd",M,!1),x.removeEventListener("otransitionend",M,!1),x.removeEventListener("transitionend",M,!1),window.removeEventListener("resize",M,!1)):window.onresize=null}}}}return(window.jQuery||window.Zepto)&&!function(n){n.fn.Swipe=function(e){return this.each(function(){n(this).data("Swipe",new t(n(this)[0],e))})}}(window.jQuery||window.Zepto),n=t}(),t=function(n){var t=(window.jQuery,window.underscore,window.Backbone),e=t.Model.extend({name:null});return n=e}(),e=function(n){var t=(window.jQuery,window.underscore,window.Backbone),e=t.Collection.extend({initialize:function(n,t){this.bind("add",t.view.addOne)}});return n=e}(),i=function(n){var i=window.jQuery,o=(window.underscore,window.Backbone),r=t,a=e,s=o.View.extend({el:i("body"),initialize:function(){this.products=new a(null,{view:this})},events:{"click #addProduct":"addProduct"},addProduct:function(){var n=prompt("\u8f93\u5165\u4ea7\u54c1\u7684\u540d\u79f0"),t=new r({name:n});this.products.add(t)},addOne:function(n){i("#productList").append("<li>"+n.get("name")+"</li>")}});return n=s}(),o=function(){{var t=(window.jQuery,n),e=(new t(document.getElementById("swipe"),{speed:400,auto:3e3,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(){},transitionEnd:function(){}}),i);new e}}()}();